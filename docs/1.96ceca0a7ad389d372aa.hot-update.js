webpackHotUpdate(1,{

/***/ 399:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _desc, _value, _class, _descriptor;\n\nvar _mobx = __webpack_require__(24);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _axios = __webpack_require__(65);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _appUrl = __webpack_require__(141);\n\nvar _appUrl2 = _interopRequireDefault(_appUrl);\n\nvar _Root = __webpack_require__(43);\n\nvar _urlSearchParams = __webpack_require__(400);\n\nvar _urlSearchParams2 = _interopRequireDefault(_urlSearchParams);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _initDefineProp(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n        enumerable: descriptor.enumerable,\n        configurable: descriptor.configurable,\n        writable: descriptor.writable,\n        value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n    });\n}\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n    var desc = {};\n    Object['ke' + 'ys'](descriptor).forEach(function (key) {\n        desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n        desc.writable = true;\n    }\n\n    desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n        return decorator(target, property, desc) || desc;\n    }, desc);\n\n    if (context && desc.initializer !== void 0) {\n        desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n        desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n        Object['define' + 'Property'](target, property, desc);\n        desc = null;\n    }\n\n    return desc;\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n    throw new Error('Decorating class property failed. Please ensure that transform-class-properties is enabled.');\n}\n\nvar cookies = __webpack_require__(401);\n\nvar ApiStore = (_dec = _mobx.action.bound, _dec2 = _mobx.action.bound, _dec3 = _mobx.action.bound, _dec4 = _mobx.action.bound, _dec5 = _mobx.action.bound, _dec6 = _mobx.action.bound, (_class = function () {\n    function ApiStore() {\n        var _this = this;\n\n        _classCallCheck(this, ApiStore);\n\n        _initDefineProp(this, 'userPolls', _descriptor, this);\n\n        this.currentPoll_Id = null;\n        this.isLoggedIn = (0, _mobx.observable)(false);\n        this.fetching = (0, _mobx.observable)(false);\n        this.userToken = (0, _mobx.observable)(null);\n        this.userName = (0, _mobx.observable)(null);\n        this.voted = (0, _mobx.observable)(false);\n        this.lastVote = (0, _mobx.observable)(null);\n        this.newOption = (0, _mobx.observable)(\"\");\n        this.pollName = (0, _mobx.observable)(\"\");\n        this.pollOptions = (0, _mobx.observable)(\"\");\n\n        this.loadingIcon = function () {\n            return _this.__loadingIcon__REACT_HOT_LOADER__.apply(_this, arguments);\n        };\n\n        this.fectchPollsList = function () {\n            return _this.__fectchPollsList__REACT_HOT_LOADER__.apply(_this, arguments);\n        };\n\n        this.fectchPollsList();\n        this.prepareToken();\n        if (this.userToken.get()) {\n            console.log(\"logged in\");\n            this.isLoggedIn.set(true);\n            this.userName.set(cookies.get(\"userName\"));\n        }\n        //this.setToken\n        console.log(\"Api store is ready\");\n    }\n\n    //var refetch = autorun()\n\n    _createClass(ApiStore, [{\n        key: '__loadingIcon__REACT_HOT_LOADER__',\n        value: function __loadingIcon__REACT_HOT_LOADER__() {\n            return this.__loadingIcon__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__loadingIcon__REACT_HOT_LOADER__',\n        value: function __loadingIcon__REACT_HOT_LOADER__() {\n            return this.__loadingIcon__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__loadingIcon__REACT_HOT_LOADER__',\n        value: function __loadingIcon__REACT_HOT_LOADER__() {\n            return this.__loadingIcon__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__loadingIcon__REACT_HOT_LOADER__',\n        value: function __loadingIcon__REACT_HOT_LOADER__(comp) {\n            return comp;\n            if (this.fetching.get()) {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    'Fetching...'\n                );\n            } else return comp;\n        }\n    }, {\n        key: 'renderOnLoginStatus',\n        value: function renderOnLoginStatus(guestOpt, userOpt) {\n            return this.isLoggedIn.get() ? userOpt : guestOpt;\n        }\n    }, {\n        key: 'logOut',\n        value: function logOut() {\n            console.log(\"Logging out\");\n            this.userToken.set(null);\n            this.userName.set(null);\n            this.isLoggedIn.set(false);\n            cookies.remove('userToken');\n            cookies.remove('userName');\n        }\n    }, {\n        key: 'getUserPolls',\n        value: function getUserPolls() {\n            var _this2 = this;\n\n            _axios2.default //({ method: 'POST', url: appUrl + `/api/createNewPoll?data=${JSON.stringify(newPoll)}`, data: { firstName: 123 } })\n\n\n            //({ method: 'POST', url: appUrl + `/api/createNewPoll?data=${JSON.stringify(newPoll)}`, data: { firstName: 123 } })\n\n\n            .get(_appUrl2.default + '/api/userPolls').then(function (res) {\n                {\n                    //this.pollsList = res.data;\n                    console.log(res.data);\n                    _this2.userPolls = res.data;\n                    //this.pollName.set(\"\");\n                    //this.pollOptions.set(\"\");\n                    //ViewStore.fectchPollsList();\n                }\n            }).catch(function (err) {\n                console.log(err.response.data);\n            });\n        }\n    }, {\n        key: 'prepareToken',\n        value: function prepareToken() {\n            //console.log(\"curr state\" + window.location.search)\n            var urlParams = new _urlSearchParams2.default(window.location.search);\n            var token = urlParams.get(\"token\");\n            console.log(token, \"curr params\");\n            if (token) {\n                console.log(\"Got the token \" + token);\n                cookies.set('userToken', token, { secure: true, expires: 14 });\n                cookies.set('userName', urlParams.get(\"userName\"));\n            }\n\n            token = cookies.get(\"userToken\");\n            console.log(\"checked the cookies\", token);\n            if (token) {\n                this.userToken.set(token);\n                this.userName.set(cookies.get(\"userName\"));\n                console.log(\"curr token\", this.userToken.get());\n            }\n        }\n    }, {\n        key: '__fectchPollsList__REACT_HOT_LOADER__',\n        value: function __fectchPollsList__REACT_HOT_LOADER__() {\n            return this.__fectchPollsList__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__fectchPollsList__REACT_HOT_LOADER__',\n        value: function __fectchPollsList__REACT_HOT_LOADER__() {\n            return this.__fectchPollsList__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__fectchPollsList__REACT_HOT_LOADER__',\n        value: function __fectchPollsList__REACT_HOT_LOADER__() {\n            return this.__fectchPollsList__REACT_HOT_LOADER__.apply(this, arguments);\n        }\n    }, {\n        key: '__fectchPollsList__REACT_HOT_LOADER__',\n        value: function __fectchPollsList__REACT_HOT_LOADER__() {\n            var _this3 = this;\n\n            this.fetching.set(true);\n            _axios2.default.get(_appUrl2.default + \"/api/pollsList\").then(function (res) {\n                console.log(\"I've got the power of Polls... Again!\", res.data);\n                _Root.ViewStore.setProperty(\"pollsList\", res.data);\n                _this3.fetching.set(false);\n                //ViewStore.dataIsFetching.set(false);\n                if (_this3.currentPoll_Id) {\n                    //this.reset();\n                    _Root.ViewStore.setPollView(_this3.currentPoll_Id);\n                }\n            });\n        }\n    }, {\n        key: 'createNewPoll',\n        value: function createNewPoll() {\n            var _this4 = this;\n\n            console.log(\"New Poll is \" + this.pollName + \" \" + this.pollOptions + \"!\");\n            var opts = this.pollOptions.get().split('\\n');\n            var newPoll = { name: this.pollName.get(), options: opts };\n            console.log(JSON.stringify(newPoll));\n            //  axios.get(appUrl + `/api/createNewPoll?pName=${this.pollName}&pOptions=${this.pollOptions}`)\n            // .then(res => {this.pollsList = res.data, console.log(res.data, 5555534)})\n            _axios2.default.post(_appUrl2.default + ('/api/createNewPoll?data=' + JSON.stringify(newPoll)), { firstName: 123 }).then(function (res) {\n                {\n                    //this.pollsList = res.data;\n                    console.log(res.data);\n                    _this4.pollName.set(\"\");\n                    _this4.pollOptions.set(\"\");\n                    _this4.fectchPollsList();\n                }\n            }).catch(function (err) {\n                console.log(err.response.data);\n            });\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            console.log(\"reset\");\n            this.newOption.set(\"\");\n            this.pollName.set(\"\");\n            this.pollOptions.set(\"\");\n            _Root.ViewStore.chosenOptionIndex.set(null);\n            //ViewStore.activeOptionIndex.set(0);\n            //if (ViewStore.getProperty[\"currentPoll\"].options.length < ViewStore.activeOptionIndex.get()) {\n            // ViewStore.activeOptionIndex.set(0);    \n            //}\n        }\n    }, {\n        key: 'vote',\n        value: function vote() {\n            var _this5 = this;\n\n            if (this.newOption.get() == \"\") {\n                console.log(_Root.ViewStore.chosenOptionIndex.get(), \"wow\");\n                this.lastVote.set(_Root.ViewStore.chosenOptionIndex.get());\n                console.log(\"Last voted for \", this.lastVote.get());\n                var vote_id = _Root.ViewStore.currentPoll.options[_Root.ViewStore.chosenOptionIndex][\"_id\"];\n                console.log(vote_id, \"voting\");\n                console.log(\"Voting for\" + this.pollName + \" \" + this.pollOptions + \"!\");\n                //this.fetching.set(true);\n                _axios2.default.get(_appUrl2.default + '/api/vote', { params: { optId: vote_id, pollId: _Root.ViewStore.currentPoll[\"_id\"] } }).then(function (res) {\n                    //this.pollsList = res.data;\n\n                    //this.fetching.set(false);\n                    //this.voted.set(true);\n\n                    console.log(\"Last voted for \", _this5.lastVote.get());\n                    _this5.fectchPollsList(_this5.currentPoll_Id);\n                    // ViewStore.fectchPollsList()\n                    console.log(res.data, 5555534);\n                    // this.reset()\n                });\n            } else _axios2.default.get(_appUrl2.default + '/api/vote', { params: { optName: this.newOption.get(), pollId: _Root.ViewStore.currentPoll[\"_id\"] } }).then(function (res) {\n                //this.pollsList = res.data;\n                _this5.fectchPollsList(_this5.currentPoll_Id);\n                //this.fetching.set(false);\n                //this.voted.set(true);\n            });\n        }\n    }]);\n\n    return ApiStore;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, 'userPolls', [_mobx.observable], {\n    enumerable: true,\n    initializer: function initializer() {\n        return null;\n    }\n}), _applyDecoratedDescriptor(_class.prototype, 'renderOnLoginStatus', [_dec], Object.getOwnPropertyDescriptor(_class.prototype, 'renderOnLoginStatus'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'logOut', [_dec2], Object.getOwnPropertyDescriptor(_class.prototype, 'logOut'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'getUserPolls', [_dec3], Object.getOwnPropertyDescriptor(_class.prototype, 'getUserPolls'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'prepareToken', [_dec4], Object.getOwnPropertyDescriptor(_class.prototype, 'prepareToken'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'createNewPoll', [_dec5], Object.getOwnPropertyDescriptor(_class.prototype, 'createNewPoll'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'vote', [_dec6], Object.getOwnPropertyDescriptor(_class.prototype, 'vote'), _class.prototype)), _class));\nvar _default = ApiStore;\nexports.default = _default;\n;\n\nvar _temp = function () {\n    if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n        return;\n    }\n\n    __REACT_HOT_LOADER__.register(ApiStore, 'ApiStore', '/home/ubuntu/workspace/react-webpack-boilerplate/app/stores/ApiStore.js');\n\n    __REACT_HOT_LOADER__.register(_default, 'default', '/home/ubuntu/workspace/react-webpack-boilerplate/app/stores/ApiStore.js');\n}();\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXBwL3N0b3Jlcy9BcGlTdG9yZS5qcz8xOGVhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RlYywgX2RlYzIsIF9kZWMzLCBfZGVjNCwgX2RlYzUsIF9kZWM2LCBfZGVzYywgX3ZhbHVlLCBfY2xhc3MsIF9kZXNjcmlwdG9yO1xuXG52YXIgX21vYnggPSByZXF1aXJlKCdtb2J4Jyk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9heGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XG5cbnZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXG52YXIgX2FwcFVybCA9IHJlcXVpcmUoJy4uL2NvbmZpZy9hcHBVcmwnKTtcblxudmFyIF9hcHBVcmwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBwVXJsKTtcblxudmFyIF9Sb290ID0gcmVxdWlyZSgnLi4vY29uZmlnL1Jvb3QnKTtcblxudmFyIF91cmxTZWFyY2hQYXJhbXMgPSByZXF1aXJlKCd1cmwtc2VhcmNoLXBhcmFtcycpO1xuXG52YXIgX3VybFNlYXJjaFBhcmFtczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cmxTZWFyY2hQYXJhbXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW5pdERlZmluZVByb3AodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvciwgY29udGV4dCkge1xuICAgIGlmICghZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgd3JpdGFibGU6IGRlc2NyaXB0b3Iud3JpdGFibGUsXG4gICAgICAgIHZhbHVlOiBkZXNjcmlwdG9yLmluaXRpYWxpemVyID8gZGVzY3JpcHRvci5pbml0aWFsaXplci5jYWxsKGNvbnRleHQpIDogdm9pZCAwXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkge1xuICAgIHZhciBkZXNjID0ge307XG4gICAgT2JqZWN0WydrZScgKyAneXMnXShkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldO1xuICAgIH0pO1xuICAgIGRlc2MuZW51bWVyYWJsZSA9ICEhZGVzYy5lbnVtZXJhYmxlO1xuICAgIGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTtcblxuICAgIGlmICgndmFsdWUnIGluIGRlc2MgfHwgZGVzYy5pbml0aWFsaXplcikge1xuICAgICAgICBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBkZXNjID0gZGVjb3JhdG9ycy5zbGljZSgpLnJldmVyc2UoKS5yZWR1Y2UoZnVuY3Rpb24gKGRlc2MsIGRlY29yYXRvcikge1xuICAgICAgICByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7XG4gICAgfSwgZGVzYyk7XG5cbiAgICBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgZGVzYy52YWx1ZSA9IGRlc2MuaW5pdGlhbGl6ZXIgPyBkZXNjLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDA7XG4gICAgICAgIGRlc2MuaW5pdGlhbGl6ZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGRlc2MuaW5pdGlhbGl6ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICBPYmplY3RbJ2RlZmluZScgKyAnUHJvcGVydHknXSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTtcbiAgICAgICAgZGVzYyA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc2M7XG59XG5cbmZ1bmN0aW9uIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIoZGVzY3JpcHRvciwgY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGVjb3JhdGluZyBjbGFzcyBwcm9wZXJ0eSBmYWlsZWQuIFBsZWFzZSBlbnN1cmUgdGhhdCB0cmFuc2Zvcm0tY2xhc3MtcHJvcGVydGllcyBpcyBlbmFibGVkLicpO1xufVxuXG52YXIgY29va2llcyA9IHJlcXVpcmUoJ2pzLWNvb2tpZScpO1xuXG52YXIgQXBpU3RvcmUgPSAoX2RlYyA9IF9tb2J4LmFjdGlvbi5ib3VuZCwgX2RlYzIgPSBfbW9ieC5hY3Rpb24uYm91bmQsIF9kZWMzID0gX21vYnguYWN0aW9uLmJvdW5kLCBfZGVjNCA9IF9tb2J4LmFjdGlvbi5ib3VuZCwgX2RlYzUgPSBfbW9ieC5hY3Rpb24uYm91bmQsIF9kZWM2ID0gX21vYnguYWN0aW9uLmJvdW5kLCAoX2NsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFwaVN0b3JlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcGlTdG9yZSk7XG5cbiAgICAgICAgX2luaXREZWZpbmVQcm9wKHRoaXMsICd1c2VyUG9sbHMnLCBfZGVzY3JpcHRvciwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50UG9sbF9JZCA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNMb2dnZWRJbiA9ICgwLCBfbW9ieC5vYnNlcnZhYmxlKShmYWxzZSk7XG4gICAgICAgIHRoaXMuZmV0Y2hpbmcgPSAoMCwgX21vYngub2JzZXJ2YWJsZSkoZmFsc2UpO1xuICAgICAgICB0aGlzLnVzZXJUb2tlbiA9ICgwLCBfbW9ieC5vYnNlcnZhYmxlKShudWxsKTtcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9ICgwLCBfbW9ieC5vYnNlcnZhYmxlKShudWxsKTtcbiAgICAgICAgdGhpcy52b3RlZCA9ICgwLCBfbW9ieC5vYnNlcnZhYmxlKShmYWxzZSk7XG4gICAgICAgIHRoaXMubGFzdFZvdGUgPSAoMCwgX21vYngub2JzZXJ2YWJsZSkobnVsbCk7XG4gICAgICAgIHRoaXMubmV3T3B0aW9uID0gKDAsIF9tb2J4Lm9ic2VydmFibGUpKFwiXCIpO1xuICAgICAgICB0aGlzLnBvbGxOYW1lID0gKDAsIF9tb2J4Lm9ic2VydmFibGUpKFwiXCIpO1xuICAgICAgICB0aGlzLnBvbGxPcHRpb25zID0gKDAsIF9tb2J4Lm9ic2VydmFibGUpKFwiXCIpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0ljb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX19sb2FkaW5nSWNvbl9fUkVBQ1RfSE9UX0xPQURFUl9fLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZmVjdGNoUG9sbHNMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9fZmVjdGNoUG9sbHNMaXN0X19SRUFDVF9IT1RfTE9BREVSX18uYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5mZWN0Y2hQb2xsc0xpc3QoKTtcbiAgICAgICAgdGhpcy5wcmVwYXJlVG9rZW4oKTtcbiAgICAgICAgaWYgKHRoaXMudXNlclRva2VuLmdldCgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCBpblwiKTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2dnZWRJbi5zZXQodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnVzZXJOYW1lLnNldChjb29raWVzLmdldChcInVzZXJOYW1lXCIpKTtcbiAgICAgICAgfVxuICAgICAgICAvL3RoaXMuc2V0VG9rZW5cbiAgICAgICAgY29uc29sZS5sb2coXCJBcGkgc3RvcmUgaXMgcmVhZHlcIik7XG4gICAgfVxuXG4gICAgLy92YXIgcmVmZXRjaCA9IGF1dG9ydW4oKVxuXG4gICAgX2NyZWF0ZUNsYXNzKEFwaVN0b3JlLCBbe1xuICAgICAgICBrZXk6ICdfX2xvYWRpbmdJY29uX19SRUFDVF9IT1RfTE9BREVSX18nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX19sb2FkaW5nSWNvbl9fUkVBQ1RfSE9UX0xPQURFUl9fKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19sb2FkaW5nSWNvbl9fUkVBQ1RfSE9UX0xPQURFUl9fLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19fbG9hZGluZ0ljb25fX1JFQUNUX0hPVF9MT0FERVJfXycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfX2xvYWRpbmdJY29uX19SRUFDVF9IT1RfTE9BREVSX18oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fX2xvYWRpbmdJY29uX19SRUFDVF9IT1RfTE9BREVSX18uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX19sb2FkaW5nSWNvbl9fUkVBQ1RfSE9UX0xPQURFUl9fJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9fbG9hZGluZ0ljb25fX1JFQUNUX0hPVF9MT0FERVJfXygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fbG9hZGluZ0ljb25fX1JFQUNUX0hPVF9MT0FERVJfXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfX2xvYWRpbmdJY29uX19SRUFDVF9IT1RfTE9BREVSX18nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX19sb2FkaW5nSWNvbl9fUkVBQ1RfSE9UX0xPQURFUl9fKGNvbXApIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmV0Y2hpbmcuZ2V0KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAnRmV0Y2hpbmcuLi4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gY29tcDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyT25Mb2dpblN0YXR1cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJPbkxvZ2luU3RhdHVzKGd1ZXN0T3B0LCB1c2VyT3B0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xvZ2dlZEluLmdldCgpID8gdXNlck9wdCA6IGd1ZXN0T3B0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsb2dPdXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbG9nT3V0KCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2dnaW5nIG91dFwiKTtcbiAgICAgICAgICAgIHRoaXMudXNlclRva2VuLnNldChudWxsKTtcbiAgICAgICAgICAgIHRoaXMudXNlck5hbWUuc2V0KG51bGwpO1xuICAgICAgICAgICAgdGhpcy5pc0xvZ2dlZEluLnNldChmYWxzZSk7XG4gICAgICAgICAgICBjb29raWVzLnJlbW92ZSgndXNlclRva2VuJyk7XG4gICAgICAgICAgICBjb29raWVzLnJlbW92ZSgndXNlck5hbWUnKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0VXNlclBvbGxzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVzZXJQb2xscygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICBfYXhpb3MyLmRlZmF1bHQgLy8oeyBtZXRob2Q6ICdQT1NUJywgdXJsOiBhcHBVcmwgKyBgL2FwaS9jcmVhdGVOZXdQb2xsP2RhdGE9JHtKU09OLnN0cmluZ2lmeShuZXdQb2xsKX1gLCBkYXRhOiB7IGZpcnN0TmFtZTogMTIzIH0gfSlcblxuXG4gICAgICAgICAgICAvLyh7IG1ldGhvZDogJ1BPU1QnLCB1cmw6IGFwcFVybCArIGAvYXBpL2NyZWF0ZU5ld1BvbGw/ZGF0YT0ke0pTT04uc3RyaW5naWZ5KG5ld1BvbGwpfWAsIGRhdGE6IHsgZmlyc3ROYW1lOiAxMjMgfSB9KVxuXG5cbiAgICAgICAgICAgIC5nZXQoX2FwcFVybDIuZGVmYXVsdCArICcvYXBpL3VzZXJQb2xscycpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnBvbGxzTGlzdCA9IHJlcy5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51c2VyUG9sbHMgPSByZXMuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnBvbGxOYW1lLnNldChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnBvbGxPcHRpb25zLnNldChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy9WaWV3U3RvcmUuZmVjdGNoUG9sbHNMaXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwcmVwYXJlVG9rZW4nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGFyZVRva2VuKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImN1cnIgc3RhdGVcIiArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gICAgICAgICAgICB2YXIgdXJsUGFyYW1zID0gbmV3IF91cmxTZWFyY2hQYXJhbXMyLmRlZmF1bHQod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB1cmxQYXJhbXMuZ2V0KFwidG9rZW5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbiwgXCJjdXJyIHBhcmFtc1wiKTtcbiAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR290IHRoZSB0b2tlbiBcIiArIHRva2VuKTtcbiAgICAgICAgICAgICAgICBjb29raWVzLnNldCgndXNlclRva2VuJywgdG9rZW4sIHsgc2VjdXJlOiB0cnVlLCBleHBpcmVzOiAxNCB9KTtcbiAgICAgICAgICAgICAgICBjb29raWVzLnNldCgndXNlck5hbWUnLCB1cmxQYXJhbXMuZ2V0KFwidXNlck5hbWVcIikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0b2tlbiA9IGNvb2tpZXMuZ2V0KFwidXNlclRva2VuXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjaGVja2VkIHRoZSBjb29raWVzXCIsIHRva2VuKTtcbiAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlclRva2VuLnNldCh0b2tlbik7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyTmFtZS5zZXQoY29va2llcy5nZXQoXCJ1c2VyTmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjdXJyIHRva2VuXCIsIHRoaXMudXNlclRva2VuLmdldCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX19mZWN0Y2hQb2xsc0xpc3RfX1JFQUNUX0hPVF9MT0FERVJfXycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfX2ZlY3RjaFBvbGxzTGlzdF9fUkVBQ1RfSE9UX0xPQURFUl9fKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19mZWN0Y2hQb2xsc0xpc3RfX1JFQUNUX0hPVF9MT0FERVJfXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfX2ZlY3RjaFBvbGxzTGlzdF9fUkVBQ1RfSE9UX0xPQURFUl9fJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9fZmVjdGNoUG9sbHNMaXN0X19SRUFDVF9IT1RfTE9BREVSX18oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ZlY3RjaFBvbGxzTGlzdF9fUkVBQ1RfSE9UX0xPQURFUl9fLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ19fZmVjdGNoUG9sbHNMaXN0X19SRUFDVF9IT1RfTE9BREVSX18nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX19mZWN0Y2hQb2xsc0xpc3RfX1JFQUNUX0hPVF9MT0FERVJfXygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZmVjdGNoUG9sbHNMaXN0X19SRUFDVF9IT1RfTE9BREVSX18uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX19mZWN0Y2hQb2xsc0xpc3RfX1JFQUNUX0hPVF9MT0FERVJfXycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfX2ZlY3RjaFBvbGxzTGlzdF9fUkVBQ1RfSE9UX0xPQURFUl9fKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hpbmcuc2V0KHRydWUpO1xuICAgICAgICAgICAgX2F4aW9zMi5kZWZhdWx0LmdldChfYXBwVXJsMi5kZWZhdWx0ICsgXCIvYXBpL3BvbGxzTGlzdFwiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkkndmUgZ290IHRoZSBwb3dlciBvZiBQb2xscy4uLiBBZ2FpbiFcIiwgcmVzLmRhdGEpO1xuICAgICAgICAgICAgICAgIF9Sb290LlZpZXdTdG9yZS5zZXRQcm9wZXJ0eShcInBvbGxzTGlzdFwiLCByZXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmZldGNoaW5nLnNldChmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy9WaWV3U3RvcmUuZGF0YUlzRmV0Y2hpbmcuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmN1cnJlbnRQb2xsX0lkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICBfUm9vdC5WaWV3U3RvcmUuc2V0UG9sbFZpZXcoX3RoaXMzLmN1cnJlbnRQb2xsX0lkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlTmV3UG9sbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVOZXdQb2xsKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTmV3IFBvbGwgaXMgXCIgKyB0aGlzLnBvbGxOYW1lICsgXCIgXCIgKyB0aGlzLnBvbGxPcHRpb25zICsgXCIhXCIpO1xuICAgICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLnBvbGxPcHRpb25zLmdldCgpLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgIHZhciBuZXdQb2xsID0geyBuYW1lOiB0aGlzLnBvbGxOYW1lLmdldCgpLCBvcHRpb25zOiBvcHRzIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShuZXdQb2xsKSk7XG4gICAgICAgICAgICAvLyAgYXhpb3MuZ2V0KGFwcFVybCArIGAvYXBpL2NyZWF0ZU5ld1BvbGw/cE5hbWU9JHt0aGlzLnBvbGxOYW1lfSZwT3B0aW9ucz0ke3RoaXMucG9sbE9wdGlvbnN9YClcbiAgICAgICAgICAgIC8vIC50aGVuKHJlcyA9PiB7dGhpcy5wb2xsc0xpc3QgPSByZXMuZGF0YSwgY29uc29sZS5sb2cocmVzLmRhdGEsIDU1NTU1MzQpfSlcbiAgICAgICAgICAgIF9heGlvczIuZGVmYXVsdC5wb3N0KF9hcHBVcmwyLmRlZmF1bHQgKyAoJy9hcGkvY3JlYXRlTmV3UG9sbD9kYXRhPScgKyBKU09OLnN0cmluZ2lmeShuZXdQb2xsKSksIHsgZmlyc3ROYW1lOiAxMjMgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMucG9sbHNMaXN0ID0gcmVzLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnBvbGxOYW1lLnNldChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnBvbGxPcHRpb25zLnNldChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmZlY3RjaFBvbGxzTGlzdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVzZXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5uZXdPcHRpb24uc2V0KFwiXCIpO1xuICAgICAgICAgICAgdGhpcy5wb2xsTmFtZS5zZXQoXCJcIik7XG4gICAgICAgICAgICB0aGlzLnBvbGxPcHRpb25zLnNldChcIlwiKTtcbiAgICAgICAgICAgIF9Sb290LlZpZXdTdG9yZS5jaG9zZW5PcHRpb25JbmRleC5zZXQobnVsbCk7XG4gICAgICAgICAgICAvL1ZpZXdTdG9yZS5hY3RpdmVPcHRpb25JbmRleC5zZXQoMCk7XG4gICAgICAgICAgICAvL2lmIChWaWV3U3RvcmUuZ2V0UHJvcGVydHlbXCJjdXJyZW50UG9sbFwiXS5vcHRpb25zLmxlbmd0aCA8IFZpZXdTdG9yZS5hY3RpdmVPcHRpb25JbmRleC5nZXQoKSkge1xuICAgICAgICAgICAgLy8gVmlld1N0b3JlLmFjdGl2ZU9wdGlvbkluZGV4LnNldCgwKTsgICAgXG4gICAgICAgICAgICAvL31cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndm90ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2b3RlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5ld09wdGlvbi5nZXQoKSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coX1Jvb3QuVmlld1N0b3JlLmNob3Nlbk9wdGlvbkluZGV4LmdldCgpLCBcIndvd1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RWb3RlLnNldChfUm9vdC5WaWV3U3RvcmUuY2hvc2VuT3B0aW9uSW5kZXguZ2V0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGFzdCB2b3RlZCBmb3IgXCIsIHRoaXMubGFzdFZvdGUuZ2V0KCkpO1xuICAgICAgICAgICAgICAgIHZhciB2b3RlX2lkID0gX1Jvb3QuVmlld1N0b3JlLmN1cnJlbnRQb2xsLm9wdGlvbnNbX1Jvb3QuVmlld1N0b3JlLmNob3Nlbk9wdGlvbkluZGV4XVtcIl9pZFwiXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2b3RlX2lkLCBcInZvdGluZ1wiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlZvdGluZyBmb3JcIiArIHRoaXMucG9sbE5hbWUgKyBcIiBcIiArIHRoaXMucG9sbE9wdGlvbnMgKyBcIiFcIik7XG4gICAgICAgICAgICAgICAgLy90aGlzLmZldGNoaW5nLnNldCh0cnVlKTtcbiAgICAgICAgICAgICAgICBfYXhpb3MyLmRlZmF1bHQuZ2V0KF9hcHBVcmwyLmRlZmF1bHQgKyAnL2FwaS92b3RlJywgeyBwYXJhbXM6IHsgb3B0SWQ6IHZvdGVfaWQsIHBvbGxJZDogX1Jvb3QuVmlld1N0b3JlLmN1cnJlbnRQb2xsW1wiX2lkXCJdIH0gfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5wb2xsc0xpc3QgPSByZXMuZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMuZmV0Y2hpbmcuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnZvdGVkLnNldCh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkxhc3Qgdm90ZWQgZm9yIFwiLCBfdGhpczUubGFzdFZvdGUuZ2V0KCkpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczUuZmVjdGNoUG9sbHNMaXN0KF90aGlzNS5jdXJyZW50UG9sbF9JZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZpZXdTdG9yZS5mZWN0Y2hQb2xsc0xpc3QoKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSwgNTU1NTUzNCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucmVzZXQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIF9heGlvczIuZGVmYXVsdC5nZXQoX2FwcFVybDIuZGVmYXVsdCArICcvYXBpL3ZvdGUnLCB7IHBhcmFtczogeyBvcHROYW1lOiB0aGlzLm5ld09wdGlvbi5nZXQoKSwgcG9sbElkOiBfUm9vdC5WaWV3U3RvcmUuY3VycmVudFBvbGxbXCJfaWRcIl0gfSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMucG9sbHNMaXN0ID0gcmVzLmRhdGE7XG4gICAgICAgICAgICAgICAgX3RoaXM1LmZlY3RjaFBvbGxzTGlzdChfdGhpczUuY3VycmVudFBvbGxfSWQpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5mZXRjaGluZy5zZXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy52b3RlZC5zZXQodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBcGlTdG9yZTtcbn0oKSwgKF9kZXNjcmlwdG9yID0gX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAndXNlclBvbGxzJywgW19tb2J4Lm9ic2VydmFibGVdLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBpbml0aWFsaXplcjogZnVuY3Rpb24gaW5pdGlhbGl6ZXIoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0pLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdyZW5kZXJPbkxvZ2luU3RhdHVzJywgW19kZWNdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdyZW5kZXJPbkxvZ2luU3RhdHVzJyksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdsb2dPdXQnLCBbX2RlYzJdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdsb2dPdXQnKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ2dldFVzZXJQb2xscycsIFtfZGVjM10sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ2dldFVzZXJQb2xscycpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAncHJlcGFyZVRva2VuJywgW19kZWM0XSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAncHJlcGFyZVRva2VuJyksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdjcmVhdGVOZXdQb2xsJywgW19kZWM1XSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnY3JlYXRlTmV3UG9sbCcpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAndm90ZScsIFtfZGVjNl0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ3ZvdGUnKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpKTtcbnZhciBfZGVmYXVsdCA9IEFwaVN0b3JlO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7XG47XG5cbnZhciBfdGVtcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIF9fUkVBQ1RfSE9UX0xPQURFUl9fID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX19SRUFDVF9IT1RfTE9BREVSX18ucmVnaXN0ZXIoQXBpU3RvcmUsICdBcGlTdG9yZScsICcvaG9tZS91YnVudHUvd29ya3NwYWNlL3JlYWN0LXdlYnBhY2stYm9pbGVycGxhdGUvYXBwL3N0b3Jlcy9BcGlTdG9yZS5qcycpO1xuXG4gICAgX19SRUFDVF9IT1RfTE9BREVSX18ucmVnaXN0ZXIoX2RlZmF1bHQsICdkZWZhdWx0JywgJy9ob21lL3VidW50dS93b3Jrc3BhY2UvcmVhY3Qtd2VicGFjay1ib2lsZXJwbGF0ZS9hcHAvc3RvcmVzL0FwaVN0b3JlLmpzJyk7XG59KCk7XG5cbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zdG9yZXMvQXBpU3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDM5OVxuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///399\n");

/***/ })

})